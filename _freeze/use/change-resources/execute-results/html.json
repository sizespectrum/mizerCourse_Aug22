{
  "hash": "730b8829a4d893b6db52db2d38cef79f",
  "result": {
    "markdown": "---\ntitle: \"Change resources\"\n---\n\n\n## In preparation\n\n\n\n::: {.cell hash='change-resources_cache/html/unnamed-chunk-1_802ea2f82992f19d98faf194aa4ea044'}\n\n```{.r .cell-code}\nremotes::install_github(\"sizespectrum/mizerExperimental\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSkipping install of 'mizerExperimental' from a github remote, the SHA1 (24654618) has not changed since last install.\n  Use `force = TRUE` to force installation\n```\n:::\n\n```{.r .cell-code}\nlibrary(mizerExperimental)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: mizer\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'mizerExperimental'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:mizer':\n\n    calibrateYield, plotDataFrame, scaleModel, steady\n```\n:::\n\n```{.r .cell-code}\nremotes::install_github(\"sizespectrum/mizerMR\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSkipping install of 'mizerMR' from a github remote, the SHA1 (7ef05154) has not changed since last install.\n  Use `force = TRUE` to force installation\n```\n:::\n\n```{.r .cell-code}\nlibrary(mizerMR)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'mizerMR'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:mizerExperimental':\n\n    plotlyResourcePred, plotResourceLevel, plotResourcePred\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:mizer':\n\n    animateSpectra, finalNResource, getDiet, initialNResource,\n    initialNResource<-, NResource, plotDiet, plotlySpectra,\n    plotSpectra, resource_capacity, resource_capacity<-,\n    resource_params, resource_params<-, resource_rate, resource_rate<-\n```\n:::\n\n```{.r .cell-code}\nremotes::install_github(\"sizespectrum/mizerHowTo\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nSkipping install of 'mizerHowTo' from a github remote, the SHA1 (16693771) has not changed since last install.\n  Use `force = TRUE` to force installation\n```\n:::\n\n```{.r .cell-code}\nlibrary(mizerHowTo)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: ggplot2\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: dplyr\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nLoading required package: parallel\n```\n:::\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n── Attaching packages\n───────────────────────────────────────\ntidyverse 1.3.2 ──\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n✔ tibble  3.1.8     ✔ purrr   0.3.4\n✔ tidyr   1.2.0     ✔ stringr 1.4.0\n✔ readr   2.1.2     ✔ forcats 0.5.1\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\n```\n:::\n\n```{.r .cell-code}\nsource(\"helper_functions.R\")\n```\n:::\n\n\nfunction forcing plankton from climate model \n\n::: {.cell hash='change-resources_cache/html/unnamed-chunk-2_db288930514dd84403d2d65de7c0654f'}\n\n```{.r .cell-code}\nplankton_forcing <- function(params, t, ...) {\n  w_cut_off <- 10\n  pkt <- 10^(other_params(params)$n_pp_array[t + params@other_params$other$t_idx,])/params@dw_full # converting to density\n  pkt[which(as.numeric(names(pkt)) >= w_cut_off)] <- 0\n  \n  return(pkt)  \n}\n\n\nsim<-readRDS(\"sim_scen2.rds\")\nparams<-sim@params\nparams <- setResource(params, resource_dynamics = \"plankton_forcing\")\n```\n:::\n\n\n\nSet the scenarios\n\n\n::: {.cell hash='change-resources_cache/html/unnamed-chunk-3_621c33cc6241f8c13f76285eb0a7f1a5'}\n\n```{.r .cell-code}\n# Create parameter objects\n# \n# params_IPSL_picontrol <- params\n# params_IPSL_ssp1rcp26 <- params\n# params_IPSL_ssp5rcp85 <- params\n# # Attach temperature\n# other_params(params_IPSL_picontrol)$ocean_temp <- readRDS(\"processed/IPSL_ocean_temp_array_PIcontrol.RDS\")\n# other_params(params_IPSL_ssp1rcp26)$ocean_temp <- readRDS(\"processed/IPSL_ocean_temp_array_CCscenario_126.RDS\")\n# other_params(params_IPSL_ssp5rcp85)$ocean_temp <- readRDS(\"processed/IPSL_ocean_temp_array_CCscenario_585.RDS\")\n# # Attach plankton\n# other_params(params_IPSL_picontrol)$n_pp_array <- readRDS(\"processed/IPSL_n_pp_array_PIcontrol.RDS\")\n# other_params(params_IPSL_ssp1rcp26)$n_pp_array <- readRDS(\"processed/IPSL_n_pp_array_CCscenario_126.RDS\")\n# other_params(params_IPSL_ssp5rcp85)$n_pp_array <- readRDS(\"processed/IPSL_n_pp_array_CCscenario_585.RDS\")\n# \n# \n\n#sim <- project(params_IPSL_ssp1rcp26, effort = effort)\n```\n:::\n\n\n_ use the resource_dynamics function \n\n\n# Set up new resource forcing \"function\" - just changes to different time slot in the n_pp_array array\n\n\nSet the scenarios\n\n\n# Create parameter objects\n# params_IPSL_picontrol <- params\n# params_IPSL_ssp1rcp26 <- params\n# params_IPSL_ssp5rcp85 <- params\n# Attach temperature\n# other_params(params_IPSL_picontrol)$ocean_temp <- readRDS(\"processed/IPSL_ocean_temp_array_PIcontrol.RDS\")\n# other_params(params_IPSL_ssp1rcp26)$ocean_temp <- readRDS(\"processed/IPSL_ocean_temp_array_CCscenario_126.RDS\")\n# other_params(params_IPSL_ssp5rcp85)$ocean_temp <- readRDS(\"processed/IPSL_ocean_temp_array_CCscenario_585.RDS\")\n# # Attach plankton\n# other_params(params_IPSL_picontrol)$n_pp_array <- readRDS(\"processed/IPSL_n_pp_array_PIcontrol.RDS\")\n# other_params(params_IPSL_ssp1rcp26)$n_pp_array <- readRDS(\"processed/IPSL_n_pp_array_CCscenario_126.RDS\")\n# other_params(params_IPSL_ssp5rcp85)$n_pp_array <- readRDS(\"processed/IPSL_n_pp_array_CCscenario_585.RDS\")\n# \n\nsimple example showing effect of two different states - e.g. change in resource slopes and intercepts on steady states?\n\n\nNOTES: \n3. Change Resources \n-Plankton over time - resource_dynamics \n\nProject the above scenario holding effort constant \n\nCan directly use outputs of earth system models for projections (GFDL inputs - FishMIP), to easily show you what functions to work we will use 2 stylised scenarios that you can adapt and explore for your own model scenarios.\n\nIf you wish to participate in FishMIP, we  provide inputs of ocean physical & bc variables to modellers.\n\ntrend - X% decline per year, lambda and X% \n\n(Add noise ?)\n\nExercise - try creating  running your own scenarios - with and without fishing -how do changes in resource affect the catches abs biomass compared to the baseline (no change in resources scenario) . How does biomass change with & without fishing under the scenarios \n\n\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}